# 二进制数据查看器使用指南

## 概述

二进制数据查看器是一个Unity编辑器工具，用于查看和分析GameFramework生成的二进制数据表文件。它提供了十六进制视图、数据结构分析和记录详情查看等功能。

## 功能特性

### 1. 文件加载
- 支持加载 `.bytes` 格式的二进制数据文件
- 自动检测GameFramework数据表格式
- 实时文件刷新功能

### 2. 数据结构分析
- 自动解析数据表头部信息（表名、记录数量等）
- 智能识别数据字段类型（int、float、string、bool等）
- 生成数据表结构摘要

### 3. 十六进制视图
- 完整的十六进制数据显示
- 可调节每行显示的字节数（8-32字节）
- ASCII字符对照显示
- 文本搜索功能

### 4. 记录详情查看
- 列表显示所有数据记录
- 点击查看单条记录的详细信息
- 显示记录的偏移量、大小和解析字段
- 记录原始数据的十六进制显示

## 使用方法

### 打开二进制数据查看器

有两种方式打开二进制数据查看器：

1. **通过菜单栏**：
   - 选择 `Window > UGF > Binary Data Viewer`

2. **通过数据表构建器**：
   - 在数据表构建器窗口中点击 "查看二进制数据" 按钮

### 加载二进制文件

1. 点击 "浏览" 按钮选择二进制数据文件
   - 默认路径：`Assets/StreamingAssets/DataTables`
   - 支持的文件格式：`.bytes`

2. 或者直接在文件路径输入框中输入文件路径

3. 点击 "加载文件" 按钮加载数据

### 查看选项配置

在 "查看选项" 区域可以配置显示内容：

- **显示数据结构**：开启/关闭数据结构分析显示
- **显示十六进制**：开启/关闭十六进制视图
- **每行字节数**：调整十六进制视图中每行显示的字节数
- **搜索**：在十六进制数据中搜索文本

### 文件信息查看

加载文件后，会显示以下信息：
- 文件大小（字节数和格式化大小）
- 文件完整路径
- 数据表信息（如果是有效的GameFramework数据表）
  - 表名
  - 记录数量
  - 头部大小
  - 解析的记录数

### 数据结构分析

如果加载的是有效的GameFramework数据表，会显示：

1. **格式说明**：
   - 头部结构：表名长度 + 表名 + 记录数量
   - 数据部分：序列化的记录数据

2. **头部数据**：
   - 以十六进制格式显示头部数据（最多64字节）

3. **数据摘要**：
   - 表的基本信息
   - 前5条记录的摘要信息
   - 每条记录的解析字段

### 记录详情查看

在记录详情区域可以：

1. **浏览记录列表**：
   - 显示所有记录的索引、偏移量和大小
   - 点击任意记录查看详细信息

2. **查看记录详情**：
   - 记录的偏移量和大小
   - 解析出的字段名和值
   - 记录的原始十六进制数据

### 十六进制视图

十六进制视图提供：

1. **格式化显示**：
   - 偏移量列
   - 十六进制字节数据
   - ASCII字符对照

2. **搜索功能**：
   - 在搜索框中输入要查找的文本
   - 点击 "查找" 按钮搜索
   - 搜索结果会在控制台中显示偏移量

## 数据格式支持

### GameFramework数据表格式

查看器专门针对GameFramework数据表格式进行了优化：

```
[表名长度:4字节][表名:变长][记录数量:4字节][记录数据:变长]
```

### 支持的数据类型

自动解析器可以识别以下数据类型：
- **int**：32位整数
- **float**：32位浮点数
- **string**：长度前缀的UTF-8字符串
- **bool**：单字节布尔值
- **byte**：原始字节数据

## 使用技巧

### 1. 快速定位问题
- 使用数据摘要快速了解表结构
- 通过记录列表定位特定数据
- 利用十六进制搜索查找特定内容

### 2. 数据验证
- 检查表名是否正确
- 验证记录数量是否符合预期
- 确认字段解析结果是否合理

### 3. 调试数据问题
- 对比原始Excel数据和解析结果
- 检查数据序列化是否正确
- 分析数据损坏或格式错误

## 注意事项

1. **文件格式**：
   - 仅支持GameFramework生成的二进制数据表
   - 其他格式的二进制文件可能无法正确解析

2. **性能考虑**：
   - 大文件加载可能需要一些时间
   - 十六进制视图对于超大文件可能影响性能

3. **数据解析**：
   - 自动解析可能不完全准确
   - 复杂数据结构可能需要手动分析
   - 解析结果仅供参考

## 故障排除

### 常见问题

1. **文件加载失败**：
   - 检查文件路径是否正确
   - 确认文件是否存在且可读
   - 验证文件格式是否正确

2. **数据结构无法识别**：
   - 确认文件是GameFramework数据表格式
   - 检查文件是否损坏
   - 尝试重新生成数据文件

3. **记录解析错误**：
   - 数据类型可能与预期不符
   - 序列化格式可能有变化
   - 参考原始Excel文件进行对比

### 获取帮助

如果遇到问题，可以：
- 查看Unity控制台的错误信息
- 检查数据表构建过程是否有错误
- 对比正常工作的数据文件

## 更新日志

### v1.0.0
- 初始版本发布
- 支持基本的二进制数据查看
- 实现十六进制视图
- 添加数据结构分析功能
- 支持记录详情查看